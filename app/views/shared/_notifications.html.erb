<% resource = local_assigns[:resource] %>
<% messages = [] %>

<% flash.each do |type, message| %>
  <% next if message.blank? %>
  <% messages << [type.to_sym, message] %>
<% end %>

<% if resource&.respond_to?(:errors) && resource.errors.present? %>
  <% resource.errors.full_messages.each do |message| %>
    <% messages << [:error, message] %>
  <% end %>
<% end %>

<% if messages.any? %>
  <div class="fixed top-4 right-4 z-50 space-y-3">
    <% messages.each do |type, message| %>
      <% css_class = case type
                     when :notice, :success then "alert alert-success"
                     when :alert, :error, :danger then "alert alert-error"
                     when :warning then "alert alert-warning"
                     else "alert alert-info"
                     end %>

      <% formatted_message = message.is_a?(Array) ? message.to_sentence : message %>
      <div role="alert"
           data-controller="notification"
           data-notification-delay-value="4000"
           class="<%= css_class %> shadow-lg transition transform duration-1000 hidden"
           data-transition-enter-from="opacity-0 translate-x-6"
           data-transition-enter-to="opacity-100 translate-x-0"
           data-transition-leave-from="opacity-100 translate-x-0"
           data-transition-leave-to="opacity-0 translate-x-6"
           >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span><%= formatted_message %></span>
        <button type="button"
                class="btn btn-ghost btn-xs ml-2"
                aria-label="Dismiss notification"
                data-action="notification#hide">
          âœ•
        </button>
      </div>
    <% end %>
  </div>
<% end %>